import{_ as t,o as a,c as o,Q as e,k as r}from"./chunks/framework.5916b37e.js";const x=JSON.parse('{"title":"Class: SphereTool","description":"","frontmatter":{},"headers":[],"relativePath":"apidist/classes/Utils_segmentation_tools_SphereTool.SphereTool.md","filePath":"apidist/classes/Utils_segmentation_tools_SphereTool.SphereTool.md"}'),l={name:"apidist/classes/Utils_segmentation_tools_SphereTool.SphereTool.md"},s=e('<p><a href="./../README.html">copper3d</a> / <a href="./../modules.html">Modules</a> / <a href="./../modules/Utils_segmentation_tools_SphereTool.html">Utils/segmentation/tools/SphereTool</a> / SphereTool</p><h1 id="class-spheretool" tabindex="-1">Class: SphereTool <a class="header-anchor" href="#class-spheretool" aria-label="Permalink to &quot;Class: SphereTool&quot;">​</a></h1><p><a href="./../modules/Utils_segmentation_tools_SphereTool.html">Utils/segmentation/tools/SphereTool</a>.SphereTool</p><h2 id="hierarchy" tabindex="-1">Hierarchy <a class="header-anchor" href="#hierarchy" aria-label="Permalink to &quot;Hierarchy&quot;">​</a></h2><ul><li><p><code>BaseTool</code></p><p>↳ <strong><code>SphereTool</code></strong></p></li></ul><h2 id="table-of-contents" tabindex="-1">Table of contents <a class="header-anchor" href="#table-of-contents" aria-label="Permalink to &quot;Table of contents&quot;">​</a></h2><h3 id="constructors" tabindex="-1">Constructors <a class="header-anchor" href="#constructors" aria-label="Permalink to &quot;Constructors&quot;">​</a></h3><ul><li><a href="./Utils_segmentation_tools_SphereTool.SphereTool.html#constructor">constructor</a></li></ul><h3 id="properties" tabindex="-1">Properties <a class="header-anchor" href="#properties" aria-label="Permalink to &quot;Properties&quot;">​</a></h3><ul><li><a href="./Utils_segmentation_tools_SphereTool.SphereTool.html#callbacks">callbacks</a></li><li><a href="./Utils_segmentation_tools_SphereTool.SphereTool.html#ctx">ctx</a></li></ul><h3 id="methods" tabindex="-1">Methods <a class="header-anchor" href="#methods" aria-label="Permalink to &quot;Methods&quot;">​</a></h3><ul><li><a href="./Utils_segmentation_tools_SphereTool.SphereTool.html#canvastovoxelcenter">canvasToVoxelCenter</a></li><li><a href="./Utils_segmentation_tools_SphereTool.SphereTool.html#clearspherecanvas">clearSphereCanvas</a></li><li><a href="./Utils_segmentation_tools_SphereTool.SphereTool.html#configmousespherewheel">configMouseSphereWheel</a></li><li><a href="./Utils_segmentation_tools_SphereTool.SphereTool.html#drawcalculatorsphere">drawCalculatorSphere</a></li><li><a href="./Utils_segmentation_tools_SphereTool.SphereTool.html#drawcalculatorsphereoneachviews">drawCalculatorSphereOnEachViews</a></li><li><a href="./Utils_segmentation_tools_SphereTool.SphereTool.html#drawsphere">drawSphere</a></li><li><a href="./Utils_segmentation_tools_SphereTool.SphereTool.html#drawspherecore">drawSphereCore</a></li><li><a href="./Utils_segmentation_tools_SphereTool.SphereTool.html#drawsphereoneachviews">drawSphereOnEachViews</a></li><li><a href="./Utils_segmentation_tools_SphereTool.SphereTool.html#getchannelforspheretype">getChannelForSphereType</a></li><li><a href="./Utils_segmentation_tools_SphereTool.SphereTool.html#getcolorforspheretype">getColorForSphereType</a></li><li><a href="./Utils_segmentation_tools_SphereTool.SphereTool.html#getlayerforspheretype">getLayerForSphereType</a></li><li><a href="./Utils_segmentation_tools_SphereTool.SphereTool.html#getsphereposition">getSpherePosition</a></li><li><a href="./Utils_segmentation_tools_SphereTool.SphereTool.html#onsphereclick">onSphereClick</a></li><li><a href="./Utils_segmentation_tools_SphereTool.SphereTool.html#onspherepointerup">onSpherePointerUp</a></li><li><a href="./Utils_segmentation_tools_SphereTool.SphereTool.html#refreshspherecanvas">refreshSphereCanvas</a></li><li><a href="./Utils_segmentation_tools_SphereTool.SphereTool.html#setcallbacks">setCallbacks</a></li><li><a href="./Utils_segmentation_tools_SphereTool.SphereTool.html#setcontext">setContext</a></li><li><a href="./Utils_segmentation_tools_SphereTool.SphereTool.html#setspherecanvassize">setSphereCanvasSize</a></li><li><a href="./Utils_segmentation_tools_SphereTool.SphereTool.html#storesphereimages">storeSphereImages</a></li><li><a href="./Utils_segmentation_tools_SphereTool.SphereTool.html#write3dspheretovolume">write3DSphereToVolume</a></li><li><a href="./Utils_segmentation_tools_SphereTool.SphereTool.html#writeallcalculatorspherestovolume">writeAllCalculatorSpheresToVolume</a></li><li><a href="./Utils_segmentation_tools_SphereTool.SphereTool.html#writecalculatorspheretovolume">writeCalculatorSphereToVolume</a></li></ul><h2 id="constructors-1" tabindex="-1">Constructors <a class="header-anchor" href="#constructors-1" aria-label="Permalink to &quot;Constructors&quot;">​</a></h2><h3 id="constructor" tabindex="-1">constructor <a class="header-anchor" href="#constructor" aria-label="Permalink to &quot;constructor&quot;">​</a></h3><p>• <strong>new SphereTool</strong>(<code>ctx</code>, <code>callbacks</code>)</p><h4 id="parameters" tabindex="-1">Parameters <a class="header-anchor" href="#parameters" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table><thead><tr><th style="text-align:left;">Name</th><th style="text-align:left;">Type</th></tr></thead><tbody><tr><td style="text-align:left;"><code>ctx</code></td><td style="text-align:left;"><code>ToolContext</code></td></tr><tr><td style="text-align:left;"><code>callbacks</code></td><td style="text-align:left;"><code>SphereHostDeps</code></td></tr></tbody></table><h4 id="overrides" tabindex="-1">Overrides <a class="header-anchor" href="#overrides" aria-label="Permalink to &quot;Overrides&quot;">​</a></h4><p>BaseTool.constructor</p><h4 id="defined-in" tabindex="-1">Defined in <a class="header-anchor" href="#defined-in" aria-label="Permalink to &quot;Defined in&quot;">​</a></h4><p><a href="https://github.com/LinkunGao/copper3d_visualisation/blob/7eb18f2/src/Utils/segmentation/tools/SphereTool.ts#L98" target="_blank" rel="noreferrer">src/Utils/segmentation/tools/SphereTool.ts:98</a></p><h2 id="properties-1" tabindex="-1">Properties <a class="header-anchor" href="#properties-1" aria-label="Permalink to &quot;Properties&quot;">​</a></h2><h3 id="callbacks" tabindex="-1">callbacks <a class="header-anchor" href="#callbacks" aria-label="Permalink to &quot;callbacks&quot;">​</a></h3><p>• <code>Private</code> <strong>callbacks</strong>: <code>SphereHostDeps</code></p><h4 id="defined-in-1" tabindex="-1">Defined in <a class="header-anchor" href="#defined-in-1" aria-label="Permalink to &quot;Defined in&quot;">​</a></h4><p><a href="https://github.com/LinkunGao/copper3d_visualisation/blob/7eb18f2/src/Utils/segmentation/tools/SphereTool.ts#L96" target="_blank" rel="noreferrer">src/Utils/segmentation/tools/SphereTool.ts:96</a></p><hr><h3 id="ctx" tabindex="-1">ctx <a class="header-anchor" href="#ctx" aria-label="Permalink to &quot;ctx&quot;">​</a></h3><p>• <code>Protected</code> <strong>ctx</strong>: <code>ToolContext</code></p><h4 id="inherited-from" tabindex="-1">Inherited from <a class="header-anchor" href="#inherited-from" aria-label="Permalink to &quot;Inherited from&quot;">​</a></h4><p>BaseTool.ctx</p><h4 id="defined-in-2" tabindex="-1">Defined in <a class="header-anchor" href="#defined-in-2" aria-label="Permalink to &quot;Defined in&quot;">​</a></h4><p><a href="https://github.com/LinkunGao/copper3d_visualisation/blob/7eb18f2/src/Utils/segmentation/tools/BaseTool.ts#L37" target="_blank" rel="noreferrer">src/Utils/segmentation/tools/BaseTool.ts:37</a></p><h2 id="methods-1" tabindex="-1">Methods <a class="header-anchor" href="#methods-1" aria-label="Permalink to &quot;Methods&quot;">​</a></h2><h3 id="canvastovoxelcenter" tabindex="-1">canvasToVoxelCenter <a class="header-anchor" href="#canvastovoxelcenter" aria-label="Permalink to &quot;canvasToVoxelCenter&quot;">​</a></h3><p>▸ <strong>canvasToVoxelCenter</strong>(<code>canvasX</code>, <code>canvasY</code>, <code>sliceIndex</code>, <code>axis</code>): <code>Object</code></p><p>Convert canvas (mm-space) coordinates to 3D voxel coordinates.</p><h4 id="parameters-1" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-1" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table><thead><tr><th style="text-align:left;">Name</th><th style="text-align:left;">Type</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;"><code>canvasX</code></td><td style="text-align:left;"><code>number</code></td><td style="text-align:left;">X position in canvas mm-space</td></tr><tr><td style="text-align:left;"><code>canvasY</code></td><td style="text-align:left;"><code>number</code></td><td style="text-align:left;">Y position in canvas mm-space</td></tr><tr><td style="text-align:left;"><code>sliceIndex</code></td><td style="text-align:left;"><code>number</code></td><td style="text-align:left;">Slice index along the viewing axis</td></tr><tr><td style="text-align:left;"><code>axis</code></td><td style="text-align:left;"><code>&quot;z&quot;</code> | <code>&quot;y&quot;</code> | <code>&quot;x&quot;</code></td><td style="text-align:left;">Viewing axis where the sphere was placed</td></tr></tbody></table><h4 id="returns" tabindex="-1">Returns <a class="header-anchor" href="#returns" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>Object</code></p>',41),n=r("p",{"x,":"","y,":"",z:""},"3D voxel coordinates",-1),i=e(`<table><thead><tr><th style="text-align:left;">Name</th><th style="text-align:left;">Type</th></tr></thead><tbody><tr><td style="text-align:left;"><code>x</code></td><td style="text-align:left;"><code>number</code></td></tr><tr><td style="text-align:left;"><code>y</code></td><td style="text-align:left;"><code>number</code></td></tr><tr><td style="text-align:left;"><code>z</code></td><td style="text-align:left;"><code>number</code></td></tr></tbody></table><h4 id="defined-in-3" tabindex="-1">Defined in <a class="header-anchor" href="#defined-in-3" aria-label="Permalink to &quot;Defined in&quot;">​</a></h4><p><a href="https://github.com/LinkunGao/copper3d_visualisation/blob/7eb18f2/src/Utils/segmentation/tools/SphereTool.ts#L534" target="_blank" rel="noreferrer">src/Utils/segmentation/tools/SphereTool.ts:534</a></p><hr><h3 id="clearspherecanvas" tabindex="-1">clearSphereCanvas <a class="header-anchor" href="#clearspherecanvas" aria-label="Permalink to &quot;clearSphereCanvas&quot;">​</a></h3><p>▸ <strong>clearSphereCanvas</strong>(): [<code>HTMLCanvasElement</code>, <code>CanvasRenderingContext2D</code>]</p><h4 id="returns-1" tabindex="-1">Returns <a class="header-anchor" href="#returns-1" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p>[<code>HTMLCanvasElement</code>, <code>CanvasRenderingContext2D</code>]</p><h4 id="defined-in-4" tabindex="-1">Defined in <a class="header-anchor" href="#defined-in-4" aria-label="Permalink to &quot;Defined in&quot;">​</a></h4><p><a href="https://github.com/LinkunGao/copper3d_visualisation/blob/7eb18f2/src/Utils/segmentation/tools/SphereTool.ts#L206" target="_blank" rel="noreferrer">src/Utils/segmentation/tools/SphereTool.ts:206</a></p><hr><h3 id="configmousespherewheel" tabindex="-1">configMouseSphereWheel <a class="header-anchor" href="#configmousespherewheel" aria-label="Permalink to &quot;configMouseSphereWheel&quot;">​</a></h3><p>▸ <strong>configMouseSphereWheel</strong>(): (<code>e</code>: <code>WheelEvent</code>) =&gt; <code>void</code></p><p>Returns a wheel event handler that adjusts sphere radius while the user holds left-click in sphere mode.</p><p>Radius is clamped to [1, 50].</p><h4 id="returns-2" tabindex="-1">Returns <a class="header-anchor" href="#returns-2" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>fn</code></p><p>▸ (<code>e</code>): <code>void</code></p><p>Returns a wheel event handler that adjusts sphere radius while the user holds left-click in sphere mode.</p><p>Radius is clamped to [1, 50].</p><h5 id="parameters-2" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-2" aria-label="Permalink to &quot;Parameters&quot;">​</a></h5><table><thead><tr><th style="text-align:left;">Name</th><th style="text-align:left;">Type</th></tr></thead><tbody><tr><td style="text-align:left;"><code>e</code></td><td style="text-align:left;"><code>WheelEvent</code></td></tr></tbody></table><h5 id="returns-3" tabindex="-1">Returns <a class="header-anchor" href="#returns-3" aria-label="Permalink to &quot;Returns&quot;">​</a></h5><p><code>void</code></p><h4 id="defined-in-5" tabindex="-1">Defined in <a class="header-anchor" href="#defined-in-5" aria-label="Permalink to &quot;Defined in&quot;">​</a></h4><p><a href="https://github.com/LinkunGao/copper3d_visualisation/blob/7eb18f2/src/Utils/segmentation/tools/SphereTool.ts#L242" target="_blank" rel="noreferrer">src/Utils/segmentation/tools/SphereTool.ts:242</a></p><hr><h3 id="drawcalculatorsphere" tabindex="-1">drawCalculatorSphere <a class="header-anchor" href="#drawcalculatorsphere" aria-label="Permalink to &quot;drawCalculatorSphere&quot;">​</a></h3><p>▸ <strong>drawCalculatorSphere</strong>(<code>radius</code>): <code>void</code></p><p>Draw all placed calculator spheres on the current slice.</p><p>Called every frame to show existing sphere markers on the current view. Uses SPHERE_COLORS for consistent type-based coloring.</p><h4 id="parameters-3" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-3" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table><thead><tr><th style="text-align:left;">Name</th><th style="text-align:left;">Type</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;"><code>radius</code></td><td style="text-align:left;"><code>number</code></td><td style="text-align:left;">Sphere radius to draw</td></tr></tbody></table><h4 id="returns-4" tabindex="-1">Returns <a class="header-anchor" href="#returns-4" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>void</code></p><h4 id="defined-in-6" tabindex="-1">Defined in <a class="header-anchor" href="#defined-in-6" aria-label="Permalink to &quot;Defined in&quot;">​</a></h4><p><a href="https://github.com/LinkunGao/copper3d_visualisation/blob/7eb18f2/src/Utils/segmentation/tools/SphereTool.ts#L414" target="_blank" rel="noreferrer">src/Utils/segmentation/tools/SphereTool.ts:414</a></p><hr><h3 id="drawcalculatorsphereoneachviews" tabindex="-1">drawCalculatorSphereOnEachViews <a class="header-anchor" href="#drawcalculatorsphereoneachviews" aria-label="Permalink to &quot;drawCalculatorSphereOnEachViews&quot;">​</a></h3><p>▸ <strong>drawCalculatorSphereOnEachViews</strong>(<code>axis</code>): <code>void</code></p><p>Draw all 4 calculator sphere types on each view axis.</p><p>Groups sphere positions by their slice index so that spheres on the same slice are drawn together before storing.</p><p>Uses SPHERE_COLORS for each sphere type instead of nrrd_states.*Color.</p><h4 id="parameters-4" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-4" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table><thead><tr><th style="text-align:left;">Name</th><th style="text-align:left;">Type</th></tr></thead><tbody><tr><td style="text-align:left;"><code>axis</code></td><td style="text-align:left;"><code>&quot;z&quot;</code> | <code>&quot;y&quot;</code> | <code>&quot;x&quot;</code></td></tr></tbody></table><h4 id="returns-5" tabindex="-1">Returns <a class="header-anchor" href="#returns-5" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>void</code></p><h4 id="defined-in-7" tabindex="-1">Defined in <a class="header-anchor" href="#defined-in-7" aria-label="Permalink to &quot;Defined in&quot;">​</a></h4><p><a href="https://github.com/LinkunGao/copper3d_visualisation/blob/7eb18f2/src/Utils/segmentation/tools/SphereTool.ts#L344" target="_blank" rel="noreferrer">src/Utils/segmentation/tools/SphereTool.ts:344</a></p><hr><h3 id="drawsphere" tabindex="-1">drawSphere <a class="header-anchor" href="#drawsphere" aria-label="Permalink to &quot;drawSphere&quot;">​</a></h3><p>▸ <strong>drawSphere</strong>(<code>mouseX</code>, <code>mouseY</code>, <code>radius</code>): <code>void</code></p><p>Draw a sphere preview circle on the sphere canvas using the current gui_states.fillColor. Called during sphere mode pointer-down.</p><p>NOTE: Does NOT composite to master canvas — the start() render loop draws the sphere canvas directly to drawingCtx for proper layering.</p><h4 id="parameters-5" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-5" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table><thead><tr><th style="text-align:left;">Name</th><th style="text-align:left;">Type</th></tr></thead><tbody><tr><td style="text-align:left;"><code>mouseX</code></td><td style="text-align:left;"><code>number</code></td></tr><tr><td style="text-align:left;"><code>mouseY</code></td><td style="text-align:left;"><code>number</code></td></tr><tr><td style="text-align:left;"><code>radius</code></td><td style="text-align:left;"><code>number</code></td></tr></tbody></table><h4 id="returns-6" tabindex="-1">Returns <a class="header-anchor" href="#returns-6" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>void</code></p><h4 id="defined-in-8" tabindex="-1">Defined in <a class="header-anchor" href="#defined-in-8" aria-label="Permalink to &quot;Defined in&quot;">​</a></h4><p><a href="https://github.com/LinkunGao/copper3d_visualisation/blob/7eb18f2/src/Utils/segmentation/tools/SphereTool.ts#L228" target="_blank" rel="noreferrer">src/Utils/segmentation/tools/SphereTool.ts:228</a></p><hr><h3 id="drawspherecore" tabindex="-1">drawSphereCore <a class="header-anchor" href="#drawspherecore" aria-label="Permalink to &quot;drawSphereCore&quot;">​</a></h3><p>▸ <strong>drawSphereCore</strong>(<code>ctx</code>, <code>x</code>, <code>y</code>, <code>radius</code>, <code>color</code>): <code>void</code></p><p>Draw a filled circle on the given context.</p><h4 id="parameters-6" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-6" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table><thead><tr><th style="text-align:left;">Name</th><th style="text-align:left;">Type</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;"><code>ctx</code></td><td style="text-align:left;"><code>CanvasRenderingContext2D</code></td><td style="text-align:left;">Canvas 2D context</td></tr><tr><td style="text-align:left;"><code>x</code></td><td style="text-align:left;"><code>number</code></td><td style="text-align:left;">Center X coordinate</td></tr><tr><td style="text-align:left;"><code>y</code></td><td style="text-align:left;"><code>number</code></td><td style="text-align:left;">Center Y coordinate</td></tr><tr><td style="text-align:left;"><code>radius</code></td><td style="text-align:left;"><code>number</code></td><td style="text-align:left;">Circle radius in pixels</td></tr><tr><td style="text-align:left;"><code>color</code></td><td style="text-align:left;"><code>string</code></td><td style="text-align:left;">Fill color (CSS string)</td></tr></tbody></table><h4 id="returns-7" tabindex="-1">Returns <a class="header-anchor" href="#returns-7" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>void</code></p><h4 id="defined-in-9" tabindex="-1">Defined in <a class="header-anchor" href="#defined-in-9" aria-label="Permalink to &quot;Defined in&quot;">​</a></h4><p><a href="https://github.com/LinkunGao/copper3d_visualisation/blob/7eb18f2/src/Utils/segmentation/tools/SphereTool.ts#L192" target="_blank" rel="noreferrer">src/Utils/segmentation/tools/SphereTool.ts:192</a></p><hr><h3 id="drawsphereoneachviews" tabindex="-1">drawSphereOnEachViews <a class="header-anchor" href="#drawsphereoneachviews" aria-label="Permalink to &quot;drawSphereOnEachViews&quot;">​</a></h3><p>▸ <strong>drawSphereOnEachViews</strong>(<code>decay</code>, <code>axis</code>): <code>void</code></p><p>Draw a sphere cross-section at a given decay distance from center, for a specific axis view.</p><p>Called for each decay value [0..sphereRadius] for all 3 axes, creating the 3D sphere effect.</p><p>The sphere circle radius at each slice = sphereRadius - decay (linear decay).</p><h4 id="parameters-7" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-7" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table><thead><tr><th style="text-align:left;">Name</th><th style="text-align:left;">Type</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;"><code>decay</code></td><td style="text-align:left;"><code>number</code></td><td style="text-align:left;">Distance from sphere center slice</td></tr><tr><td style="text-align:left;"><code>axis</code></td><td style="text-align:left;"><code>&quot;z&quot;</code> | <code>&quot;y&quot;</code> | <code>&quot;x&quot;</code></td><td style="text-align:left;">Axis to render on (&#39;x&#39;, &#39;y&#39;, &#39;z&#39;)</td></tr></tbody></table><h4 id="returns-8" tabindex="-1">Returns <a class="header-anchor" href="#returns-8" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>void</code></p><h4 id="defined-in-10" tabindex="-1">Defined in <a class="header-anchor" href="#defined-in-10" aria-label="Permalink to &quot;Defined in&quot;">​</a></h4><p><a href="https://github.com/LinkunGao/copper3d_visualisation/blob/7eb18f2/src/Utils/segmentation/tools/SphereTool.ts#L291" target="_blank" rel="noreferrer">src/Utils/segmentation/tools/SphereTool.ts:291</a></p><hr><h3 id="getchannelforspheretype" tabindex="-1">getChannelForSphereType <a class="header-anchor" href="#getchannelforspheretype" aria-label="Permalink to &quot;getChannelForSphereType&quot;">​</a></h3><p>▸ <strong>getChannelForSphereType</strong>(<code>type</code>): <code>number</code></p><p>Get the channel number for a sphere type.</p><h4 id="parameters-8" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-8" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table><thead><tr><th style="text-align:left;">Name</th><th style="text-align:left;">Type</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;"><code>type</code></td><td style="text-align:left;"><a href="./../modules/Utils_segmentation_tools_SphereTool.html#spheretype"><code>SphereType</code></a></td><td style="text-align:left;">Sphere type (&#39;tumour&#39;, &#39;skin&#39;, &#39;ribcage&#39;, &#39;nipple&#39;)</td></tr></tbody></table><h4 id="returns-9" tabindex="-1">Returns <a class="header-anchor" href="#returns-9" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>number</code></p><p>Channel number (1-8) mapped to this sphere type</p><p><strong><code>Example</code></strong></p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">sphereTool.</span><span style="color:#B392F0;">getChannelForSphereType</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;tumour&#39;</span><span style="color:#E1E4E8;">);  </span><span style="color:#6A737D;">// → 1</span></span>
<span class="line"><span style="color:#E1E4E8;">sphereTool.</span><span style="color:#B392F0;">getChannelForSphereType</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;skin&#39;</span><span style="color:#E1E4E8;">);    </span><span style="color:#6A737D;">// → 4</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">sphereTool.</span><span style="color:#6F42C1;">getChannelForSphereType</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;tumour&#39;</span><span style="color:#24292E;">);  </span><span style="color:#6A737D;">// → 1</span></span>
<span class="line"><span style="color:#24292E;">sphereTool.</span><span style="color:#6F42C1;">getChannelForSphereType</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;skin&#39;</span><span style="color:#24292E;">);    </span><span style="color:#6A737D;">// → 4</span></span></code></pre></div><h4 id="defined-in-11" tabindex="-1">Defined in <a class="header-anchor" href="#defined-in-11" aria-label="Permalink to &quot;Defined in&quot;">​</a></h4><p><a href="https://github.com/LinkunGao/copper3d_visualisation/blob/7eb18f2/src/Utils/segmentation/tools/SphereTool.ts#L121" target="_blank" rel="noreferrer">src/Utils/segmentation/tools/SphereTool.ts:121</a></p><hr><h3 id="getcolorforspheretype" tabindex="-1">getColorForSphereType <a class="header-anchor" href="#getcolorforspheretype" aria-label="Permalink to &quot;getColorForSphereType&quot;">​</a></h3><p>▸ <strong>getColorForSphereType</strong>(<code>type</code>): <code>string</code></p><p>Get the preview color for a sphere type.</p><p>If a volume is available for the target layer, uses the volume&#39;s custom color map (respects per-layer color customization). Otherwise falls back to SPHERE_COLORS (derived from CHANNEL_HEX_COLORS).</p><h4 id="parameters-9" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-9" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table><thead><tr><th style="text-align:left;">Name</th><th style="text-align:left;">Type</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;"><code>type</code></td><td style="text-align:left;"><a href="./../modules/Utils_segmentation_tools_SphereTool.html#spheretype"><code>SphereType</code></a></td><td style="text-align:left;">Sphere type</td></tr></tbody></table><h4 id="returns-10" tabindex="-1">Returns <a class="header-anchor" href="#returns-10" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>string</code></p><p>CSS color string (hex)</p><h4 id="defined-in-12" tabindex="-1">Defined in <a class="header-anchor" href="#defined-in-12" aria-label="Permalink to &quot;Defined in&quot;">​</a></h4><p><a href="https://github.com/LinkunGao/copper3d_visualisation/blob/7eb18f2/src/Utils/segmentation/tools/SphereTool.ts#L145" target="_blank" rel="noreferrer">src/Utils/segmentation/tools/SphereTool.ts:145</a></p><hr><h3 id="getlayerforspheretype" tabindex="-1">getLayerForSphereType <a class="header-anchor" href="#getlayerforspheretype" aria-label="Permalink to &quot;getLayerForSphereType&quot;">​</a></h3><p>▸ <strong>getLayerForSphereType</strong>(<code>type</code>): <code>string</code></p><p>Get the default layer for a sphere type.</p><h4 id="parameters-10" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-10" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table><thead><tr><th style="text-align:left;">Name</th><th style="text-align:left;">Type</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;"><code>type</code></td><td style="text-align:left;"><a href="./../modules/Utils_segmentation_tools_SphereTool.html#spheretype"><code>SphereType</code></a></td><td style="text-align:left;">Sphere type</td></tr></tbody></table><h4 id="returns-11" tabindex="-1">Returns <a class="header-anchor" href="#returns-11" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>string</code></p><p>Layer ID (e.g. &#39;layer1&#39;)</p><h4 id="defined-in-13" tabindex="-1">Defined in <a class="header-anchor" href="#defined-in-13" aria-label="Permalink to &quot;Defined in&quot;">​</a></h4><p><a href="https://github.com/LinkunGao/copper3d_visualisation/blob/7eb18f2/src/Utils/segmentation/tools/SphereTool.ts#L131" target="_blank" rel="noreferrer">src/Utils/segmentation/tools/SphereTool.ts:131</a></p><hr><h3 id="getsphereposition" tabindex="-1">getSpherePosition <a class="header-anchor" href="#getsphereposition" aria-label="Permalink to &quot;getSpherePosition&quot;">​</a></h3><p>▸ <code>Private</code> <strong>getSpherePosition</strong>(<code>position</code>, <code>axis</code>): <code>Object</code></p><h4 id="parameters-11" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-11" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table><thead><tr><th style="text-align:left;">Name</th><th style="text-align:left;">Type</th></tr></thead><tbody><tr><td style="text-align:left;"><code>position</code></td><td style="text-align:left;"><code>ICommXYZ</code></td></tr><tr><td style="text-align:left;"><code>axis</code></td><td style="text-align:left;"><code>&quot;z&quot;</code> | <code>&quot;y&quot;</code> | <code>&quot;x&quot;</code></td></tr></tbody></table><h4 id="returns-12" tabindex="-1">Returns <a class="header-anchor" href="#returns-12" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>Object</code></p><table><thead><tr><th style="text-align:left;">Name</th><th style="text-align:left;">Type</th></tr></thead><tbody><tr><td style="text-align:left;"><code>x</code></td><td style="text-align:left;"><code>number</code></td></tr><tr><td style="text-align:left;"><code>y</code></td><td style="text-align:left;"><code>number</code></td></tr><tr><td style="text-align:left;"><code>z</code></td><td style="text-align:left;"><code>number</code></td></tr></tbody></table><h4 id="defined-in-14" tabindex="-1">Defined in <a class="header-anchor" href="#defined-in-14" aria-label="Permalink to &quot;Defined in&quot;">​</a></h4><p><a href="https://github.com/LinkunGao/copper3d_visualisation/blob/7eb18f2/src/Utils/segmentation/tools/SphereTool.ts#L325" target="_blank" rel="noreferrer">src/Utils/segmentation/tools/SphereTool.ts:325</a></p><hr><h3 id="onsphereclick" tabindex="-1">onSphereClick <a class="header-anchor" href="#onsphereclick" aria-label="Permalink to &quot;onSphereClick&quot;">​</a></h3><p>▸ <strong>onSphereClick</strong>(<code>e</code>): <code>void</code></p><p>Handle left-click in sphere mode — record origin, draw preview.</p><p>Performs all data operations for sphere placement:</p><ol><li>Record sphere origin for current axis</li><li>Convert origin to all three axes via setUpSphereOrigins</li><li>Store origin for the active sphere type</li><li>Enable crosshair at click position</li><li>Draw calculator sphere preview</li></ol><p>Event binding (wheel, pointerup) stays in DrawToolCore as orchestration.</p><h4 id="parameters-12" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-12" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table><thead><tr><th style="text-align:left;">Name</th><th style="text-align:left;">Type</th></tr></thead><tbody><tr><td style="text-align:left;"><code>e</code></td><td style="text-align:left;"><code>MouseEvent</code></td></tr></tbody></table><h4 id="returns-13" tabindex="-1">Returns <a class="header-anchor" href="#returns-13" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>void</code></p><h4 id="defined-in-15" tabindex="-1">Defined in <a class="header-anchor" href="#defined-in-15" aria-label="Permalink to &quot;Defined in&quot;">​</a></h4><p><a href="https://github.com/LinkunGao/copper3d_visualisation/blob/7eb18f2/src/Utils/segmentation/tools/SphereTool.ts#L449" target="_blank" rel="noreferrer">src/Utils/segmentation/tools/SphereTool.ts:449</a></p><hr><h3 id="onspherepointerup" tabindex="-1">onSpherePointerUp <a class="header-anchor" href="#onspherepointerup" aria-label="Permalink to &quot;onSpherePointerUp&quot;">​</a></h3><p>▸ <strong>onSpherePointerUp</strong>(): <code>void</code></p><p>Handle pointer-up in sphere mode — write to volume, fire callbacks.</p><p>Performs:</p><ol><li>Write all placed calculator spheres to sphereMaskVolume</li><li>Refresh sphere canvas overlay from volume</li><li>Fire onSphereChanged and onCalculatorPositionsChanged callbacks</li></ol><p>Event cleanup (wheel, pointerup listener removal) stays in DrawToolCore.</p><h4 id="returns-14" tabindex="-1">Returns <a class="header-anchor" href="#returns-14" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>void</code></p><h4 id="defined-in-16" tabindex="-1">Defined in <a class="header-anchor" href="#defined-in-16" aria-label="Permalink to &quot;Defined in&quot;">​</a></h4><p><a href="https://github.com/LinkunGao/copper3d_visualisation/blob/7eb18f2/src/Utils/segmentation/tools/SphereTool.ts#L504" target="_blank" rel="noreferrer">src/Utils/segmentation/tools/SphereTool.ts:504</a></p><hr><h3 id="refreshspherecanvas" tabindex="-1">refreshSphereCanvas <a class="header-anchor" href="#refreshspherecanvas" aria-label="Permalink to &quot;refreshSphereCanvas&quot;">​</a></h3><p>▸ <strong>refreshSphereCanvas</strong>(): <code>void</code></p><p>Render the current slice of sphereMaskVolume to drawingSphereCanvas.</p><p>Called after any operation that changes the view (slice, axis, zoom) to keep the sphere overlay visible. Uses the same render pipeline as layer masks (emptyCanvas → sphere canvas at display scale).</p><h4 id="returns-15" tabindex="-1">Returns <a class="header-anchor" href="#returns-15" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>void</code></p><h4 id="defined-in-17" tabindex="-1">Defined in <a class="header-anchor" href="#defined-in-17" aria-label="Permalink to &quot;Defined in&quot;">​</a></h4><p><a href="https://github.com/LinkunGao/copper3d_visualisation/blob/7eb18f2/src/Utils/segmentation/tools/SphereTool.ts#L688" target="_blank" rel="noreferrer">src/Utils/segmentation/tools/SphereTool.ts:688</a></p><hr><h3 id="setcallbacks" tabindex="-1">setCallbacks <a class="header-anchor" href="#setcallbacks" aria-label="Permalink to &quot;setCallbacks&quot;">​</a></h3><p>▸ <strong>setCallbacks</strong>(<code>callbacks</code>): <code>void</code></p><h4 id="parameters-13" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-13" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table><thead><tr><th style="text-align:left;">Name</th><th style="text-align:left;">Type</th></tr></thead><tbody><tr><td style="text-align:left;"><code>callbacks</code></td><td style="text-align:left;"><code>SphereHostDeps</code></td></tr></tbody></table><h4 id="returns-16" tabindex="-1">Returns <a class="header-anchor" href="#returns-16" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>void</code></p><h4 id="defined-in-18" tabindex="-1">Defined in <a class="header-anchor" href="#defined-in-18" aria-label="Permalink to &quot;Defined in&quot;">​</a></h4><p><a href="https://github.com/LinkunGao/copper3d_visualisation/blob/7eb18f2/src/Utils/segmentation/tools/SphereTool.ts#L103" target="_blank" rel="noreferrer">src/Utils/segmentation/tools/SphereTool.ts:103</a></p><hr><h3 id="setcontext" tabindex="-1">setContext <a class="header-anchor" href="#setcontext" aria-label="Permalink to &quot;setContext&quot;">​</a></h3><p>▸ <strong>setContext</strong>(<code>ctx</code>): <code>void</code></p><h4 id="parameters-14" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-14" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table><thead><tr><th style="text-align:left;">Name</th><th style="text-align:left;">Type</th></tr></thead><tbody><tr><td style="text-align:left;"><code>ctx</code></td><td style="text-align:left;"><code>ToolContext</code></td></tr></tbody></table><h4 id="returns-17" tabindex="-1">Returns <a class="header-anchor" href="#returns-17" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>void</code></p><h4 id="inherited-from-1" tabindex="-1">Inherited from <a class="header-anchor" href="#inherited-from-1" aria-label="Permalink to &quot;Inherited from&quot;">​</a></h4><p>BaseTool.setContext</p><h4 id="defined-in-19" tabindex="-1">Defined in <a class="header-anchor" href="#defined-in-19" aria-label="Permalink to &quot;Defined in&quot;">​</a></h4><p><a href="https://github.com/LinkunGao/copper3d_visualisation/blob/7eb18f2/src/Utils/segmentation/tools/BaseTool.ts#L43" target="_blank" rel="noreferrer">src/Utils/segmentation/tools/BaseTool.ts:43</a></p><hr><h3 id="setspherecanvassize" tabindex="-1">setSphereCanvasSize <a class="header-anchor" href="#setspherecanvassize" aria-label="Permalink to &quot;setSphereCanvasSize&quot;">​</a></h3><p>▸ <strong>setSphereCanvasSize</strong>(<code>axis?</code>): <code>void</code></p><h4 id="parameters-15" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-15" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table><thead><tr><th style="text-align:left;">Name</th><th style="text-align:left;">Type</th></tr></thead><tbody><tr><td style="text-align:left;"><code>axis?</code></td><td style="text-align:left;"><code>&quot;z&quot;</code> | <code>&quot;y&quot;</code> | <code>&quot;x&quot;</code></td></tr></tbody></table><h4 id="returns-18" tabindex="-1">Returns <a class="header-anchor" href="#returns-18" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>void</code></p><h4 id="defined-in-20" tabindex="-1">Defined in <a class="header-anchor" href="#defined-in-20" aria-label="Permalink to &quot;Defined in&quot;">​</a></h4><p><a href="https://github.com/LinkunGao/copper3d_visualisation/blob/7eb18f2/src/Utils/segmentation/tools/SphereTool.ts#L163" target="_blank" rel="noreferrer">src/Utils/segmentation/tools/SphereTool.ts:163</a></p><hr><h3 id="storesphereimages" tabindex="-1">storeSphereImages <a class="header-anchor" href="#storesphereimages" aria-label="Permalink to &quot;storeSphereImages&quot;">​</a></h3><p>▸ <code>Private</code> <strong>storeSphereImages</strong>(<code>_index</code>, <code>_axis</code>): <code>void</code></p><p>Store sphere slice image into SphereMaskVolume.</p><p>Currently a no-op — sphere slice data is rendered as overlay only.</p><p>TODO: Future — write sphere circle data into nrrd_states.sphereMaskVolume at the specified slice index and axis. Use SPHERE_CHANNEL_MAP to determine the target channel when integrating with layer MaskVolume.</p><h4 id="parameters-16" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-16" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table><thead><tr><th style="text-align:left;">Name</th><th style="text-align:left;">Type</th></tr></thead><tbody><tr><td style="text-align:left;"><code>_index</code></td><td style="text-align:left;"><code>number</code></td></tr><tr><td style="text-align:left;"><code>_axis</code></td><td style="text-align:left;"><code>&quot;z&quot;</code> | <code>&quot;y&quot;</code> | <code>&quot;x&quot;</code></td></tr></tbody></table><h4 id="returns-19" tabindex="-1">Returns <a class="header-anchor" href="#returns-19" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>void</code></p><h4 id="defined-in-21" tabindex="-1">Defined in <a class="header-anchor" href="#defined-in-21" aria-label="Permalink to &quot;Defined in&quot;">​</a></h4><p><a href="https://github.com/LinkunGao/copper3d_visualisation/blob/7eb18f2/src/Utils/segmentation/tools/SphereTool.ts#L272" target="_blank" rel="noreferrer">src/Utils/segmentation/tools/SphereTool.ts:272</a></p><hr><h3 id="write3dspheretovolume" tabindex="-1">write3DSphereToVolume <a class="header-anchor" href="#write3dspheretovolume" aria-label="Permalink to &quot;write3DSphereToVolume&quot;">​</a></h3><p>▸ <strong>write3DSphereToVolume</strong>(<code>label?</code>): <code>void</code></p><p>Write a 3D solid sphere to sphereMaskVolume.</p><p>Converts the sphere center from canvas mm-space to voxel coordinates, then iterates over a bounding box and sets voxels within the sphere. The sphere is an ellipsoid in voxel space to appear circular in physical (mm) space on all axis views.</p><h4 id="parameters-17" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-17" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table><thead><tr><th style="text-align:left;">Name</th><th style="text-align:left;">Type</th><th style="text-align:left;">Default value</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;"><code>label</code></td><td style="text-align:left;"><code>number</code></td><td style="text-align:left;"><code>SPHERE_LABELS.default</code></td><td style="text-align:left;">Label value to write (1-4, default 1)</td></tr></tbody></table><h4 id="returns-20" tabindex="-1">Returns <a class="header-anchor" href="#returns-20" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>void</code></p><h4 id="defined-in-22" tabindex="-1">Defined in <a class="header-anchor" href="#defined-in-22" aria-label="Permalink to &quot;Defined in&quot;">​</a></h4><p><a href="https://github.com/LinkunGao/copper3d_visualisation/blob/7eb18f2/src/Utils/segmentation/tools/SphereTool.ts#L571" target="_blank" rel="noreferrer">src/Utils/segmentation/tools/SphereTool.ts:571</a></p><hr><h3 id="writeallcalculatorspherestovolume" tabindex="-1">writeAllCalculatorSpheresToVolume <a class="header-anchor" href="#writeallcalculatorspherestovolume" aria-label="Permalink to &quot;writeAllCalculatorSpheresToVolume&quot;">​</a></h3><p>▸ <strong>writeAllCalculatorSpheresToVolume</strong>(): <code>void</code></p><p>Write all placed calculator spheres to the volume. Clears the volume first, then writes each placed sphere type.</p><h4 id="returns-21" tabindex="-1">Returns <a class="header-anchor" href="#returns-21" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>void</code></p><h4 id="defined-in-23" tabindex="-1">Defined in <a class="header-anchor" href="#defined-in-23" aria-label="Permalink to &quot;Defined in&quot;">​</a></h4><p><a href="https://github.com/LinkunGao/copper3d_visualisation/blob/7eb18f2/src/Utils/segmentation/tools/SphereTool.ts#L667" target="_blank" rel="noreferrer">src/Utils/segmentation/tools/SphereTool.ts:667</a></p><hr><h3 id="writecalculatorspheretovolume" tabindex="-1">writeCalculatorSphereToVolume <a class="header-anchor" href="#writecalculatorspheretovolume" aria-label="Permalink to &quot;writeCalculatorSphereToVolume&quot;">​</a></h3><p>▸ <strong>writeCalculatorSphereToVolume</strong>(<code>type</code>): <code>void</code></p><p>Write a calculator sphere type to sphereMaskVolume. Uses the stored origin for the specified sphere type.</p><h4 id="parameters-18" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-18" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table><thead><tr><th style="text-align:left;">Name</th><th style="text-align:left;">Type</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;"><code>type</code></td><td style="text-align:left;"><a href="./../modules/Utils_segmentation_tools_SphereTool.html#spheretype"><code>SphereType</code></a></td><td style="text-align:left;">Sphere type (&#39;tumour&#39;, &#39;skin&#39;, &#39;nipple&#39;, &#39;ribcage&#39;)</td></tr></tbody></table><h4 id="returns-22" tabindex="-1">Returns <a class="header-anchor" href="#returns-22" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>void</code></p><h4 id="defined-in-24" tabindex="-1">Defined in <a class="header-anchor" href="#defined-in-24" aria-label="Permalink to &quot;Defined in&quot;">​</a></h4><p><a href="https://github.com/LinkunGao/copper3d_visualisation/blob/7eb18f2/src/Utils/segmentation/tools/SphereTool.ts#L616" target="_blank" rel="noreferrer">src/Utils/segmentation/tools/SphereTool.ts:616</a></p>`,231),d=[s,n,i];function h(c,p,u,f,m,b){return a(),o("div",null,d)}const y=t(l,[["render",h]]);export{x as __pageData,y as default};
